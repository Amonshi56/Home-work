# Домашнее задание к занятию "4.5. NAT"

**

**Домашнее задание выполните в [Google Docs](https://docs.google.com/) и отправьте в личном кабинете на проверку ссылку на ваш документ.**

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "4.5. NAT - Александр Александров"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### [](https://github.com/netology-code/snet-homeworks/blob/main/4-05.md#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-1)Задание 1.

Вы подняли на своём домашнем компьютере с IP-адресом `192.168.0.2` web-сервер.

-   Получится ли у пользователей интернета открыть этот сайт?
-   Нужно ли будет вам для этого что-то сделать дополнительно?
-   Существует ли такой набор настроек провайдера, который не позволит подключение?

Поразмышляйте над примером.

_Приведите ответ в свободной форме._

### Ответ: Сайт открыть не получится потому что у сервера будет серый адрес. Для доступа к серверу нужно сделать static NAT или пробросить 80 порт сервера.
---

### [](https://github.com/netology-code/snet-homeworks/blob/main/4-05.md#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-2)Задание 2.

-   Узел `src` инициировал соединение с узлом `dst`.
-   На маршрутизаторе узла `src` была создана трансляция:

| src local IP:port | src global IP:port  | dst IP         | protocol |   
| ----------------- | ------------------- | ------------ | --------  |
| 10.0.0.2:1111     | 93.15.10.2:2222    | 1.1.1.1:80   | tcp         |

Применив знания по установке TCP сессий, ответьте на вопросы:

-   Сможет ли злоумышленник доставить пакет до `10.0.0.2`, отправив пакет на адрес/порт `93.15.10.2:2222` с адреса `74.5.12.4`?
-   А если злоумышленник подменит source IP-адрес и сгенерирует пакет с source IP:port - `1.1.1.1:80`

_Приведите ответ в свободной форме._

## Ответ: Нет не сможет, в первом случае потому что в таблице трансляций указан dit IP и ответ будет принят только от него.  А во втором случе из-за отсутствия трехстороннего рукопожатия с поддельным сервером так как у него нет идентификаторов данного TCP соединения. 

---

### [](https://github.com/netology-code/snet-homeworks/blob/main/4-05.md#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-3)Задание 3.

-   Узел `src` инициировал соединение с узлом `dst`.
-   На маршрутизаторе узла `src` была создана трансляция:

| src local IP:port | src global IP:port | dst IP | protocol|
| -------- | -------- | -------- | -------- |
| 10.0.0.2:1111     | 93.15.10.2:2222     | 8.8.8.8:53     |udp|

Применив знания по работе UDP, ответьте на вопросы:

-   Сможет ли злоумышленник доставить пакет до `10.0.0.2`, отправив пакет на адрес/порт `93.15.10.2:2222` с адреса `74.5.12.4`?
-   А если злоумышленник подменит source IP-адрес и сгенерирует пакет с source IP:port - `8.8.8.8:53`

_Приведите ответ в свободной форме._

## Ответ: Нет не сможет, в первом случае потому что в таблице трансляций указан dit IP и ответ будет принят только от него. Во втором случае сможет, так как в данном протоколе отсутствует трехстороннее рукопожатие.
---

### [](https://github.com/netology-code/snet-homeworks/blob/main/4-05.md#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-4)Задание 4.

Найдите самую часто встречающуюся проблему при работе клиентов за NAT с протоколом FTP, связанную с особенностью работы FTP (на лекции по портам эта особенность упоминалась).

1.  В чём выражается проблема?
2.  Почему она возникает?
3.  Что можно сделать, чтобы избежать этой проблемы?

_Приведите ответ в свободной форме._

## Ответ: Проблема в установлении соединения, из за того что данный протокол использует несколько соединений одно для управления и остальные для соединения, решается проброской портов 20,21 для управления и пробросить и указать набор динамических портов для данных. Если серверов несколько то у каждого сервера должен быть свой набор портов.
---

**

## [](https://github.com/netology-code/snet-homeworks/blob/main/4-05.md#%D0%B4%D0%BE%D0%BF%D0%BE%D0%BB%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D1%8F-%D1%81%D0%BE-%D0%B7%D0%B2%D0%B5%D0%B7%D0%B4%D0%BE%D1%87%D0%BA%D0%BE%D0%B9)Дополнительные задания (со звездочкой*)

Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### [](https://github.com/netology-code/snet-homeworks/blob/main/4-05.md#%D0%B7%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-5)Задание 5.

Вспомните схему из 3-го урока.

[![](https://camo.githubusercontent.com/f4289bfa3801b693de516478d90ce0264284c3aa52faf17dacf4ae3270fc434a/68747470733a2f2f692e696d6775722e636f6d2f664f45307664682e706e67)](https://camo.githubusercontent.com/f4289bfa3801b693de516478d90ce0264284c3aa52faf17dacf4ae3270fc434a/68747470733a2f2f692e696d6775722e636f6d2f664f45307664682e706e67)

Немного перефразируем прошлый вопрос.

-   Поразмышляете, можно ли каким-то образом отправлять пакеты с компьютера `192.168.1.2` на компьютер `192.168.1.3` если они подключены согласно приведённой ниже схеме?
-   Если да, то что и как бы вы предложили настроить? Как и к чему нужно подключаться?

_Приведите ответ в свободной форме._

## Ответ: Пакеты отправить нельзя так как маршрут назначения пакета не известен для маршрутизатора. Настроить NAT на маршрутизаторах и обращатся по ip маршрутизатора.